


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html id="htmlId">
<head>
  <title>Coverage Report :: BeanGenerator</title>
  <style type="text/css">
    @import "../../.css/coverage.css";
  </style>
</head>

<body>
<div class="header"></div>

<div class="content">
<div class="breadCrumbs">
    [ <a href="../../index.html">all classes</a> ]
    [ <a href="../index.html">com.sun.tools.internal.xjc.generator.bean</a> ]
</div>

<h1>Coverage Summary for Class: BeanGenerator (com.sun.tools.internal.xjc.generator.bean)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">BeanGenerator</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/ 30)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/ 260)
  </span>
</td>
</tr>
  <tr>
    <td class="name">BeanGenerator$1</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/ 4)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/ 4)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">BeanGenerator$2</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/ 4)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/ 4)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">BeanGenerator$3</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/ 2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/ 2)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">BeanGenerator$4</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/ 1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/ 1)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">BeanGenerator$5</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/ 1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/ 3)
  </span>
</td>
  </tr>
<tr>
  <td class="name"><strong>total</strong></td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/ 42)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/ 274)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<div class="sourceCode"><i>1</i>&nbsp;//
<i>2</i>&nbsp;// Source code recreated from a .class file by IntelliJ IDEA
<i>3</i>&nbsp;// (powered by Fernflower decompiler)
<i>4</i>&nbsp;//
<i>5</i>&nbsp;
<i>6</i>&nbsp;package com.sun.tools.internal.xjc.generator.bean;
<i>7</i>&nbsp;
<i>8</i>&nbsp;import com.sun.codemodel.internal.ClassType;
<i>9</i>&nbsp;import com.sun.codemodel.internal.JAnnotatable;
<i>10</i>&nbsp;import com.sun.codemodel.internal.JClass;
<i>11</i>&nbsp;import com.sun.codemodel.internal.JClassAlreadyExistsException;
<i>12</i>&nbsp;import com.sun.codemodel.internal.JClassContainer;
<i>13</i>&nbsp;import com.sun.codemodel.internal.JCodeModel;
<i>14</i>&nbsp;import com.sun.codemodel.internal.JDefinedClass;
<i>15</i>&nbsp;import com.sun.codemodel.internal.JEnumConstant;
<i>16</i>&nbsp;import com.sun.codemodel.internal.JExpr;
<i>17</i>&nbsp;import com.sun.codemodel.internal.JExpression;
<i>18</i>&nbsp;import com.sun.codemodel.internal.JFieldVar;
<i>19</i>&nbsp;import com.sun.codemodel.internal.JForEach;
<i>20</i>&nbsp;import com.sun.codemodel.internal.JInvocation;
<i>21</i>&nbsp;import com.sun.codemodel.internal.JJavaName;
<i>22</i>&nbsp;import com.sun.codemodel.internal.JMethod;
<i>23</i>&nbsp;import com.sun.codemodel.internal.JPackage;
<i>24</i>&nbsp;import com.sun.codemodel.internal.JType;
<i>25</i>&nbsp;import com.sun.codemodel.internal.JVar;
<i>26</i>&nbsp;import com.sun.codemodel.internal.fmt.JStaticJavaFile;
<i>27</i>&nbsp;import com.sun.codemodel.internal.fmt.JStaticJavaFile.LineFilter;
<i>28</i>&nbsp;import com.sun.istack.internal.NotNull;
<i>29</i>&nbsp;import com.sun.tools.internal.xjc.AbortException;
<i>30</i>&nbsp;import com.sun.tools.internal.xjc.ErrorReceiver;
<i>31</i>&nbsp;import com.sun.tools.internal.xjc.api.SpecVersion;
<i>32</i>&nbsp;import com.sun.tools.internal.xjc.generator.annotation.spec.XmlAnyAttributeWriter;
<i>33</i>&nbsp;import com.sun.tools.internal.xjc.generator.annotation.spec.XmlEnumValueWriter;
<i>34</i>&nbsp;import com.sun.tools.internal.xjc.generator.annotation.spec.XmlEnumWriter;
<i>35</i>&nbsp;import com.sun.tools.internal.xjc.generator.annotation.spec.XmlJavaTypeAdapterWriter;
<i>36</i>&nbsp;import com.sun.tools.internal.xjc.generator.annotation.spec.XmlMimeTypeWriter;
<i>37</i>&nbsp;import com.sun.tools.internal.xjc.generator.annotation.spec.XmlRootElementWriter;
<i>38</i>&nbsp;import com.sun.tools.internal.xjc.generator.annotation.spec.XmlSeeAlsoWriter;
<i>39</i>&nbsp;import com.sun.tools.internal.xjc.generator.annotation.spec.XmlTypeWriter;
<i>40</i>&nbsp;import com.sun.tools.internal.xjc.generator.bean.ClassOutlineImpl;
<i>41</i>&nbsp;import com.sun.tools.internal.xjc.generator.bean.ElementOutlineImpl;
<i>42</i>&nbsp;import com.sun.tools.internal.xjc.generator.bean.Messages;
<i>43</i>&nbsp;import com.sun.tools.internal.xjc.generator.bean.MethodWriter;
<i>44</i>&nbsp;import com.sun.tools.internal.xjc.generator.bean.PackageOutlineImpl;
<i>45</i>&nbsp;import com.sun.tools.internal.xjc.generator.bean.ImplStructureStrategy.Result;
<i>46</i>&nbsp;import com.sun.tools.internal.xjc.generator.bean.field.FieldRenderer;
<i>47</i>&nbsp;import com.sun.tools.internal.xjc.model.CAdapter;
<i>48</i>&nbsp;import com.sun.tools.internal.xjc.model.CAttributePropertyInfo;
<i>49</i>&nbsp;import com.sun.tools.internal.xjc.model.CClassInfo;
<i>50</i>&nbsp;import com.sun.tools.internal.xjc.model.CClassInfoParent;
<i>51</i>&nbsp;import com.sun.tools.internal.xjc.model.CClassRef;
<i>52</i>&nbsp;import com.sun.tools.internal.xjc.model.CElementInfo;
<i>53</i>&nbsp;import com.sun.tools.internal.xjc.model.CEnumConstant;
<i>54</i>&nbsp;import com.sun.tools.internal.xjc.model.CEnumLeafInfo;
<i>55</i>&nbsp;import com.sun.tools.internal.xjc.model.CPropertyInfo;
<i>56</i>&nbsp;import com.sun.tools.internal.xjc.model.CReferencePropertyInfo;
<i>57</i>&nbsp;import com.sun.tools.internal.xjc.model.CTypeRef;
<i>58</i>&nbsp;import com.sun.tools.internal.xjc.model.Model;
<i>59</i>&nbsp;import com.sun.tools.internal.xjc.model.CClassInfoParent.Visitor;
<i>60</i>&nbsp;import com.sun.tools.internal.xjc.model.nav.NClass;
<i>61</i>&nbsp;import com.sun.tools.internal.xjc.model.nav.NType;
<i>62</i>&nbsp;import com.sun.tools.internal.xjc.outline.Aspect;
<i>63</i>&nbsp;import com.sun.tools.internal.xjc.outline.EnumConstantOutline;
<i>64</i>&nbsp;import com.sun.tools.internal.xjc.outline.EnumOutline;
<i>65</i>&nbsp;import com.sun.tools.internal.xjc.outline.FieldOutline;
<i>66</i>&nbsp;import com.sun.tools.internal.xjc.outline.Outline;
<i>67</i>&nbsp;import com.sun.tools.internal.xjc.outline.PackageOutline;
<i>68</i>&nbsp;import com.sun.tools.internal.xjc.util.CodeModelClassFactory;
<i>69</i>&nbsp;import com.sun.xml.internal.bind.v2.runtime.SwaRefAdapter;
<i>70</i>&nbsp;import com.sun.xml.internal.xsom.XmlString;
<i>71</i>&nbsp;import java.io.Serializable;
<i>72</i>&nbsp;import java.net.URL;
<i>73</i>&nbsp;import java.util.Collection;
<i>74</i>&nbsp;import java.util.HashMap;
<i>75</i>&nbsp;import java.util.HashSet;
<i>76</i>&nbsp;import java.util.Iterator;
<i>77</i>&nbsp;import java.util.LinkedHashMap;
<i>78</i>&nbsp;import java.util.Map;
<i>79</i>&nbsp;import java.util.TreeSet;
<i>80</i>&nbsp;import javax.xml.bind.JAXBContext;
<i>81</i>&nbsp;import javax.xml.bind.JAXBException;
<i>82</i>&nbsp;import javax.xml.bind.annotation.XmlAttachmentRef;
<i>83</i>&nbsp;import javax.xml.bind.annotation.XmlID;
<i>84</i>&nbsp;import javax.xml.bind.annotation.XmlIDREF;
<i>85</i>&nbsp;import javax.xml.namespace.QName;
<i>86</i>&nbsp;
<i>87</i>&nbsp;public final class BeanGenerator implements Outline {
<i>88</i>&nbsp;    private final CodeModelClassFactory codeModelClassFactory;
<i>89</i>&nbsp;    private final ErrorReceiver errorReceiver;
<i>90</i>&nbsp;    private final Map&lt;JPackage, PackageOutlineImpl&gt; packageContexts = new LinkedHashMap();
<i>91</i>&nbsp;    private final Map&lt;CClassInfo, ClassOutlineImpl&gt; classes = new LinkedHashMap();
<i>92</i>&nbsp;    private final Map&lt;CEnumLeafInfo, EnumOutline&gt; enums = new LinkedHashMap();
<i>93</i>&nbsp;    private final Map&lt;Class, JClass&gt; generatedRuntime = new LinkedHashMap();
<i>94</i>&nbsp;    private final Model model;
<i>95</i>&nbsp;    private final JCodeModel codeModel;
<i>96</i>&nbsp;    private final Map&lt;CPropertyInfo, FieldOutline&gt; fields = new LinkedHashMap();
<i>97</i>&nbsp;    final Map&lt;CElementInfo, ElementOutlineImpl&gt; elements = new LinkedHashMap();
<i>98</i>&nbsp;    private final Visitor&lt;JClassContainer&gt; exposedContainerBuilder = new Visitor() {
<i>99</i>&nbsp;        public JClassContainer onBean(CClassInfo bean) {
<i>100</i>&nbsp;            return BeanGenerator.this.getClazz(bean).ref;
<i>101</i>&nbsp;        }
<i>102</i>&nbsp;
<i>103</i>&nbsp;        public JClassContainer onElement(CElementInfo element) {
<i>104</i>&nbsp;            return BeanGenerator.this.getElement(element).implClass;
<i>105</i>&nbsp;        }
<i>106</i>&nbsp;
<i>107</i>&nbsp;        public JClassContainer onPackage(JPackage pkg) {
<i>108</i>&nbsp;            return BeanGenerator.this.model.strategy.getPackage(pkg, Aspect.EXPOSED);
<b class="nc"><i>109</i>&nbsp;        }</b>
<i>110</i>&nbsp;    };
<i>111</i>&nbsp;    private final Visitor&lt;JClassContainer&gt; implContainerBuilder = new Visitor() {
<i>112</i>&nbsp;        public JClassContainer onBean(CClassInfo bean) {
<i>113</i>&nbsp;            return BeanGenerator.this.getClazz(bean).implClass;
<i>114</i>&nbsp;        }
<i>115</i>&nbsp;
<i>116</i>&nbsp;        public JClassContainer onElement(CElementInfo element) {
<b class="nc"><i>117</i>&nbsp;            return BeanGenerator.this.getElement(element).implClass;</b>
<i>118</i>&nbsp;        }
<i>119</i>&nbsp;
<b class="nc"><i>120</i>&nbsp;        public JClassContainer onPackage(JPackage pkg) {</b>
<i>121</i>&nbsp;            return BeanGenerator.this.model.strategy.getPackage(pkg, Aspect.IMPLEMENTATION);
<i>122</i>&nbsp;        }
<b class="nc"><i>123</i>&nbsp;    };</b>
<i>124</i>&nbsp;
<i>125</i>&nbsp;    public static Outline generate(Model model, ErrorReceiver _errorReceiver) {
<i>126</i>&nbsp;        try {
<i>127</i>&nbsp;            return new BeanGenerator(model, _errorReceiver);
<b class="nc"><i>128</i>&nbsp;        } catch (AbortException var3) {</b>
<i>129</i>&nbsp;            return null;
<i>130</i>&nbsp;        }
<i>131</i>&nbsp;    }
<i>132</i>&nbsp;
<i>133</i>&nbsp;    private BeanGenerator(Model _model, ErrorReceiver _errorReceiver) {
<i>134</i>&nbsp;        this.model = _model;
<i>135</i>&nbsp;        this.codeModel = this.model.codeModel;
<i>136</i>&nbsp;        this.errorReceiver = _errorReceiver;
<i>137</i>&nbsp;        this.codeModelClassFactory = new CodeModelClassFactory(this.errorReceiver);
<b class="nc"><i>138</i>&nbsp;        Iterator packages = this.model.enums().values().iterator();</b>
<i>139</i>&nbsp;
<i>140</i>&nbsp;        while(packages.hasNext()) {
<i>141</i>&nbsp;            CEnumLeafInfo OBJECT = (CEnumLeafInfo)packages.next();
<i>142</i>&nbsp;            this.enums.put(OBJECT, this.generateEnumDef(OBJECT));
<b class="nc"><i>143</i>&nbsp;        }</b>
<i>144</i>&nbsp;
<i>145</i>&nbsp;        JPackage[] var11 = this.getUsedPackages(Aspect.EXPOSED);
<i>146</i>&nbsp;        JPackage[] var12 = var11;
<i>147</i>&nbsp;        int i$ = var11.length;
<i>148</i>&nbsp;
<i>149</i>&nbsp;        for(int ei = 0; ei &lt; i$; ++ei) {
<i>150</i>&nbsp;            JPackage superClass = var12[ei];
<i>151</i>&nbsp;            this.getPackageContext(superClass);
<i>152</i>&nbsp;        }
<i>153</i>&nbsp;
<i>154</i>&nbsp;        Iterator var13 = this.model.beans().values().iterator();
<i>155</i>&nbsp;
<i>156</i>&nbsp;        while(var13.hasNext()) {
<i>157</i>&nbsp;            CClassInfo var15 = (CClassInfo)var13.next();
<i>158</i>&nbsp;            this.getClazz(var15);
<i>159</i>&nbsp;        }
<i>160</i>&nbsp;
<i>161</i>&nbsp;        var13 = this.packageContexts.values().iterator();
<i>162</i>&nbsp;
<i>163</i>&nbsp;        while(var13.hasNext()) {
<b class="nc"><i>164</i>&nbsp;            PackageOutlineImpl var17 = (PackageOutlineImpl)var13.next();</b>
<b class="nc"><i>165</i>&nbsp;            var17.calcDefaultValues();</b>
<b class="nc"><i>166</i>&nbsp;        }</b>
<i>167</i>&nbsp;
<i>168</i>&nbsp;        JClass var14 = this.codeModel.ref(Object.class);
<i>169</i>&nbsp;        Iterator var16 = this.getClasses().iterator();
<i>170</i>&nbsp;
<b class="nc"><i>171</i>&nbsp;        ClassOutlineImpl var18;</b>
<i>172</i>&nbsp;        while(var16.hasNext()) {
<b class="nc"><i>173</i>&nbsp;            var18 = (ClassOutlineImpl)var16.next();</b>
<b class="nc"><i>174</i>&nbsp;            CClassInfo var19 = var18.target.getBaseClass();</b>
<b class="nc"><i>175</i>&nbsp;            if(var19 != null) {</b>
<b class="nc"><i>176</i>&nbsp;                this.model.strategy._extends(var18, this.getClazz(var19));</b>
<i>177</i>&nbsp;            } else {
<i>178</i>&nbsp;                CClassRef base = var18.target.getRefBaseClass();
<b class="nc"><i>179</i>&nbsp;                if(base != null) {</b>
<b class="nc"><i>180</i>&nbsp;                    var18.implClass._extends(base.toType(this, Aspect.EXPOSED));</b>
<i>181</i>&nbsp;                } else {
<b class="nc"><i>182</i>&nbsp;                    if(this.model.rootClass != null &amp;&amp; var18.implClass._extends().equals(var14)) {</b>
<i>183</i>&nbsp;                        var18.implClass._extends(this.model.rootClass);
<i>184</i>&nbsp;                    }
<b class="nc"><i>185</i>&nbsp;</b>
<b class="nc"><i>186</i>&nbsp;                    if(this.model.rootInterface != null) {</b>
<i>187</i>&nbsp;                        var18.ref._implements(this.model.rootInterface);
<i>188</i>&nbsp;                    }
<i>189</i>&nbsp;                }
<b class="nc"><i>190</i>&nbsp;            }</b>
<b class="nc"><i>191</i>&nbsp;</b>
<i>192</i>&nbsp;            if(this.model.serializable) {
<i>193</i>&nbsp;                var18.implClass._implements(Serializable.class);
<b class="nc"><i>194</i>&nbsp;                if(this.model.serialVersionUID != null) {</b>
<b class="nc"><i>195</i>&nbsp;                    var18.implClass.field(28, this.codeModel.LONG, &quot;serialVersionUID&quot;, JExpr.lit(this.model.serialVersionUID.longValue()));</b>
<i>196</i>&nbsp;                }
<b class="nc"><i>197</i>&nbsp;            }</b>
<i>198</i>&nbsp;
<i>199</i>&nbsp;            CClassInfoParent var22 = var18.target.parent();
<i>200</i>&nbsp;            if(var22 != null &amp;&amp; var22 instanceof CClassInfo) {
<b class="nc"><i>201</i>&nbsp;                String pkg = var22.getOwnerPackage().name();</b>
<i>202</i>&nbsp;                String shortName = var22.fullName().substring(var22.fullName().indexOf(pkg) + pkg.length() + 1);
<i>203</i>&nbsp;                if(var18.target.shortName.equals(shortName)) {
<b class="nc"><i>204</i>&nbsp;                    this.getErrorReceiver().error(var18.target.getLocator(), Messages.ERR_KEYNAME_COLLISION.format(new Object[]{shortName}));</b>
<b class="nc"><i>205</i>&nbsp;                }</b>
<i>206</i>&nbsp;            }
<b class="nc"><i>207</i>&nbsp;        }</b>
<i>208</i>&nbsp;
<b class="nc"><i>209</i>&nbsp;        var16 = this.getClasses().iterator();</b>
<b class="nc"><i>210</i>&nbsp;</b>
<b class="nc"><i>211</i>&nbsp;        while(var16.hasNext()) {</b>
<i>212</i>&nbsp;            var18 = (ClassOutlineImpl)var16.next();
<i>213</i>&nbsp;            this.generateClassBody(var18);
<b class="nc"><i>214</i>&nbsp;        }</b>
<b class="nc"><i>215</i>&nbsp;</b>
<b class="nc"><i>216</i>&nbsp;        var16 = this.enums.values().iterator();</b>
<b class="nc"><i>217</i>&nbsp;</b>
<i>218</i>&nbsp;        while(var16.hasNext()) {
<i>219</i>&nbsp;            EnumOutline var20 = (EnumOutline)var16.next();
<b class="nc"><i>220</i>&nbsp;            this.generateEnumBody(var20);</b>
<i>221</i>&nbsp;        }
<i>222</i>&nbsp;
<b class="nc"><i>223</i>&nbsp;        var16 = this.model.getAllElements().iterator();</b>
<b class="nc"><i>224</i>&nbsp;</b>
<i>225</i>&nbsp;        while(var16.hasNext()) {
<b class="nc"><i>226</i>&nbsp;            CElementInfo var21 = (CElementInfo)var16.next();</b>
<b class="nc"><i>227</i>&nbsp;            this.getPackageContext(var21._package()).objectFactoryGenerator().populate(var21);</b>
<i>228</i>&nbsp;        }
<i>229</i>&nbsp;
<b class="nc"><i>230</i>&nbsp;        if(this.model.options.debugMode) {</b>
<b class="nc"><i>231</i>&nbsp;            this.generateClassList();</b>
<i>232</i>&nbsp;        }
<b class="nc"><i>233</i>&nbsp;</b>
<b class="nc"><i>234</i>&nbsp;    }</b>
<i>235</i>&nbsp;
<i>236</i>&nbsp;    private void generateClassList() {
<i>237</i>&nbsp;        try {
<i>238</i>&nbsp;            JDefinedClass e = this.codeModel.rootPackage()._class(&quot;JAXBDebug&quot;);
<i>239</i>&nbsp;            JMethod m = e.method(17, JAXBContext.class, &quot;createContext&quot;);
<i>240</i>&nbsp;            JVar $classLoader = m.param(ClassLoader.class, &quot;classLoader&quot;);
<i>241</i>&nbsp;            m._throws(JAXBException.class);
<i>242</i>&nbsp;            JInvocation inv = this.codeModel.ref(JAXBContext.class).staticInvoke(&quot;newInstance&quot;);
<i>243</i>&nbsp;            m.body()._return(inv);
<i>244</i>&nbsp;            switch(BeanGenerator.SyntheticClass_1.$SwitchMap$com$sun$tools$internal$xjc$generator$bean$ImplStructureStrategy[this.model.strategy.ordinal()]) {
<i>245</i>&nbsp;            case 1:
<b class="nc"><i>246</i>&nbsp;                StringBuilder i$1 = new StringBuilder();</b>
<b class="nc"><i>247</i>&nbsp;</b>
<b class="nc"><i>248</i>&nbsp;                PackageOutlineImpl po1;</b>
<b class="nc"><i>249</i>&nbsp;                for(Iterator po2 = this.packageContexts.values().iterator(); po2.hasNext(); i$1.append(po1._package().name())) {</b>
<b class="nc"><i>250</i>&nbsp;                    po1 = (PackageOutlineImpl)po2.next();</b>
<b class="nc"><i>251</i>&nbsp;                    if(i$1.length() &gt; 0) {</b>
<i>252</i>&nbsp;                        i$1.append(&#39;:&#39;);
<b class="nc"><i>253</i>&nbsp;                    }</b>
<i>254</i>&nbsp;                }
<i>255</i>&nbsp;
<b class="nc"><i>256</i>&nbsp;                inv.arg(i$1.toString()).arg($classLoader);</b>
<b class="nc"><i>257</i>&nbsp;                break;</b>
<b class="nc"><i>258</i>&nbsp;            case 2:</b>
<b class="nc"><i>259</i>&nbsp;                Iterator i$ = this.getClasses().iterator();</b>
<i>260</i>&nbsp;
<b class="nc"><i>261</i>&nbsp;                while(i$.hasNext()) {</b>
<b class="nc"><i>262</i>&nbsp;                    ClassOutlineImpl po = (ClassOutlineImpl)i$.next();</b>
<i>263</i>&nbsp;                    inv.arg(po.implRef.dotclass());
<i>264</i>&nbsp;                }
<b class="nc"><i>265</i>&nbsp;</b>
<b class="nc"><i>266</i>&nbsp;                i$ = this.packageContexts.values().iterator();</b>
<b class="nc"><i>267</i>&nbsp;</b>
<b class="nc"><i>268</i>&nbsp;                while(i$.hasNext()) {</b>
<b class="nc"><i>269</i>&nbsp;                    PackageOutlineImpl po3 = (PackageOutlineImpl)i$.next();</b>
<i>270</i>&nbsp;                    inv.arg(po3.objectFactory().dotclass());
<b class="nc"><i>271</i>&nbsp;                }</b>
<i>272</i>&nbsp;
<b class="nc"><i>273</i>&nbsp;                return;</b>
<b class="nc"><i>274</i>&nbsp;            default:</b>
<i>275</i>&nbsp;                throw new IllegalStateException();
<i>276</i>&nbsp;            }
<b class="nc"><i>277</i>&nbsp;        } catch (JClassAlreadyExistsException var8) {</b>
<i>278</i>&nbsp;            var8.printStackTrace();
<i>279</i>&nbsp;        }
<i>280</i>&nbsp;
<i>281</i>&nbsp;    }
<b class="nc"><i>282</i>&nbsp;</b>
<i>283</i>&nbsp;    public Model getModel() {
<i>284</i>&nbsp;        return this.model;
<i>285</i>&nbsp;    }
<b class="nc"><i>286</i>&nbsp;</b>
<i>287</i>&nbsp;    public JCodeModel getCodeModel() {
<i>288</i>&nbsp;        return this.codeModel;
<i>289</i>&nbsp;    }
<i>290</i>&nbsp;
<b class="nc"><i>291</i>&nbsp;    public JClassContainer getContainer(CClassInfoParent parent, Aspect aspect) {</b>
<i>292</i>&nbsp;        Visitor v;
<b class="nc"><i>293</i>&nbsp;        switch(BeanGenerator.SyntheticClass_1.$SwitchMap$com$sun$tools$internal$xjc$outline$Aspect[aspect.ordinal()]) {</b>
<b class="nc"><i>294</i>&nbsp;        case 1:</b>
<i>295</i>&nbsp;            v = this.exposedContainerBuilder;
<b class="nc"><i>296</i>&nbsp;            break;</b>
<b class="nc"><i>297</i>&nbsp;        case 2:</b>
<i>298</i>&nbsp;            v = this.implContainerBuilder;
<b class="nc"><i>299</i>&nbsp;            break;</b>
<b class="nc"><i>300</i>&nbsp;        default:</b>
<i>301</i>&nbsp;            assert false;
<b class="nc"><i>302</i>&nbsp;</b>
<i>303</i>&nbsp;            throw new IllegalStateException();
<i>304</i>&nbsp;        }
<i>305</i>&nbsp;
<b class="nc"><i>306</i>&nbsp;        return (JClassContainer)parent.accept(v);</b>
<i>307</i>&nbsp;    }
<i>308</i>&nbsp;
<b class="nc"><i>309</i>&nbsp;    public final JType resolve(CTypeRef ref, Aspect a) {</b>
<b class="nc"><i>310</i>&nbsp;        return ((NType)ref.getTarget().getType()).toType(this, a);</b>
<i>311</i>&nbsp;    }
<b class="nc"><i>312</i>&nbsp;</b>
<i>313</i>&nbsp;    public final JPackage[] getUsedPackages(Aspect aspect) {
<i>314</i>&nbsp;        TreeSet s = new TreeSet();
<i>315</i>&nbsp;        Iterator i$ = this.model.beans().values().iterator();
<i>316</i>&nbsp;
<b class="nc"><i>317</i>&nbsp;        while(i$.hasNext()) {</b>
<i>318</i>&nbsp;            CClassInfo e = (CClassInfo)i$.next();
<i>319</i>&nbsp;            JClassContainer cont = this.getContainer(e.parent(), aspect);
<i>320</i>&nbsp;            if(cont.isPackage()) {
<b class="nc"><i>321</i>&nbsp;                s.add((JPackage)cont);</b>
<i>322</i>&nbsp;            }
<i>323</i>&nbsp;        }
<i>324</i>&nbsp;
<b class="nc"><i>325</i>&nbsp;        i$ = this.model.getElementMappings((NClass)null).values().iterator();</b>
<b class="nc"><i>326</i>&nbsp;</b>
<i>327</i>&nbsp;        while(i$.hasNext()) {
<b class="nc"><i>328</i>&nbsp;            CElementInfo e1 = (CElementInfo)i$.next();</b>
<i>329</i>&nbsp;            s.add(e1._package());
<i>330</i>&nbsp;        }
<i>331</i>&nbsp;
<b class="nc"><i>332</i>&nbsp;        return (JPackage[])s.toArray(new JPackage[s.size()]);</b>
<i>333</i>&nbsp;    }
<i>334</i>&nbsp;
<i>335</i>&nbsp;    public ErrorReceiver getErrorReceiver() {
<b class="nc"><i>336</i>&nbsp;        return this.errorReceiver;</b>
<i>337</i>&nbsp;    }
<i>338</i>&nbsp;
<i>339</i>&nbsp;    public CodeModelClassFactory getClassFactory() {
<i>340</i>&nbsp;        return this.codeModelClassFactory;
<i>341</i>&nbsp;    }
<i>342</i>&nbsp;
<i>343</i>&nbsp;    public PackageOutlineImpl getPackageContext(JPackage p) {
<i>344</i>&nbsp;        PackageOutlineImpl r = (PackageOutlineImpl)this.packageContexts.get(p);
<i>345</i>&nbsp;        if(r == null) {
<i>346</i>&nbsp;            r = new PackageOutlineImpl(this, this.model, p);
<i>347</i>&nbsp;            this.packageContexts.put(p, r);
<i>348</i>&nbsp;        }
<i>349</i>&nbsp;
<i>350</i>&nbsp;        return r;
<i>351</i>&nbsp;    }
<i>352</i>&nbsp;
<i>353</i>&nbsp;    private ClassOutlineImpl generateClassDef(CClassInfo bean) {
<i>354</i>&nbsp;        Result r = this.model.strategy.createClasses(this, bean);
<b class="nc"><i>355</i>&nbsp;        JDefinedClass implRef;</b>
<i>356</i>&nbsp;        if(bean.getUserSpecifiedImplClass() != null) {
<b class="nc"><i>357</i>&nbsp;            JDefinedClass usr;</b>
<b class="nc"><i>358</i>&nbsp;            try {</b>
<b class="nc"><i>359</i>&nbsp;                usr = this.codeModel._class(bean.getUserSpecifiedImplClass());</b>
<b class="nc"><i>360</i>&nbsp;                usr.hide();</b>
<b class="nc"><i>361</i>&nbsp;            } catch (JClassAlreadyExistsException var6) {</b>
<i>362</i>&nbsp;                usr = var6.getExistingClass();
<b class="nc"><i>363</i>&nbsp;            }</b>
<i>364</i>&nbsp;
<i>365</i>&nbsp;            usr._extends(r.implementation);
<i>366</i>&nbsp;            implRef = usr;
<i>367</i>&nbsp;        } else {
<b class="nc"><i>368</i>&nbsp;            implRef = r.implementation;</b>
<i>369</i>&nbsp;        }
<i>370</i>&nbsp;
<b class="nc"><i>371</i>&nbsp;        return new ClassOutlineImpl(this, bean, r.exposed, r.implementation, implRef);</b>
<i>372</i>&nbsp;    }
<i>373</i>&nbsp;
<b class="nc"><i>374</i>&nbsp;    public Collection&lt;ClassOutlineImpl&gt; getClasses() {</b>
<i>375</i>&nbsp;        assert this.model.beans().size() == this.classes.size();
<b class="nc"><i>376</i>&nbsp;</b>
<i>377</i>&nbsp;        return this.classes.values();
<i>378</i>&nbsp;    }
<b class="nc"><i>379</i>&nbsp;</b>
<b class="nc"><i>380</i>&nbsp;    public ClassOutlineImpl getClazz(CClassInfo bean) {</b>
<b class="nc"><i>381</i>&nbsp;        ClassOutlineImpl r = (ClassOutlineImpl)this.classes.get(bean);</b>
<b class="nc"><i>382</i>&nbsp;        if(r == null) {</b>
<i>383</i>&nbsp;            this.classes.put(bean, r = this.generateClassDef(bean));
<b class="nc"><i>384</i>&nbsp;        }</b>
<i>385</i>&nbsp;
<i>386</i>&nbsp;        return r;
<i>387</i>&nbsp;    }
<i>388</i>&nbsp;
<i>389</i>&nbsp;    public ElementOutlineImpl getElement(CElementInfo ei) {
<i>390</i>&nbsp;        ElementOutlineImpl def = (ElementOutlineImpl)this.elements.get(ei);
<i>391</i>&nbsp;        if(def == null &amp;&amp; ei.hasClass()) {
<b class="nc"><i>392</i>&nbsp;            def = new ElementOutlineImpl(this, ei);</b>
<i>393</i>&nbsp;        }
<i>394</i>&nbsp;
<b class="nc"><i>395</i>&nbsp;        return def;</b>
<i>396</i>&nbsp;    }
<i>397</i>&nbsp;
<i>398</i>&nbsp;    public EnumOutline getEnum(CEnumLeafInfo eli) {
<b class="nc"><i>399</i>&nbsp;        return (EnumOutline)this.enums.get(eli);</b>
<i>400</i>&nbsp;    }
<b class="nc"><i>401</i>&nbsp;</b>
<b class="nc"><i>402</i>&nbsp;    public Collection&lt;EnumOutline&gt; getEnums() {</b>
<i>403</i>&nbsp;        return this.enums.values();
<b class="nc"><i>404</i>&nbsp;    }</b>
<b class="nc"><i>405</i>&nbsp;</b>
<b class="nc"><i>406</i>&nbsp;    public Iterable&lt;? extends PackageOutline&gt; getAllPackageContexts() {</b>
<b class="nc"><i>407</i>&nbsp;        return this.packageContexts.values();</b>
<b class="nc"><i>408</i>&nbsp;    }</b>
<b class="nc"><i>409</i>&nbsp;</b>
<i>410</i>&nbsp;    public FieldOutline getField(CPropertyInfo prop) {
<b class="nc"><i>411</i>&nbsp;        return (FieldOutline)this.fields.get(prop);</b>
<i>412</i>&nbsp;    }
<i>413</i>&nbsp;
<i>414</i>&nbsp;    private void generateClassBody(ClassOutlineImpl cc) {
<i>415</i>&nbsp;        CClassInfo target = cc.target;
<i>416</i>&nbsp;        String mostUsedNamespaceURI = cc._package().getMostUsedNamespaceURI();
<b class="nc"><i>417</i>&nbsp;        XmlTypeWriter xtw = (XmlTypeWriter)cc.implClass.annotate2(XmlTypeWriter.class);</b>
<b class="nc"><i>418</i>&nbsp;        this.writeTypeName(cc.target.getTypeName(), xtw, mostUsedNamespaceURI);</b>
<i>419</i>&nbsp;        Iterator i$;
<i>420</i>&nbsp;        if(this.model.options.target.isLaterThan(SpecVersion.V2_1)) {
<i>421</i>&nbsp;            i$ = cc.target.listSubclasses();
<b class="nc"><i>422</i>&nbsp;            if(i$.hasNext()) {</b>
<b class="nc"><i>423</i>&nbsp;                XmlSeeAlsoWriter prop = (XmlSeeAlsoWriter)cc.implClass.annotate2(XmlSeeAlsoWriter.class);</b>
<b class="nc"><i>424</i>&nbsp;</b>
<b class="nc"><i>425</i>&nbsp;                while(i$.hasNext()) {</b>
<i>426</i>&nbsp;                    CClassInfo xrew = (CClassInfo)i$.next();
<i>427</i>&nbsp;                    prop.value(this.getClazz(xrew).implRef);
<i>428</i>&nbsp;                }
<b class="nc"><i>429</i>&nbsp;            }</b>
<b class="nc"><i>430</i>&nbsp;        }</b>
<i>431</i>&nbsp;
<b class="nc"><i>432</i>&nbsp;        if(target.isElement()) {</b>
<i>433</i>&nbsp;            String i$1 = target.getElementName().getNamespaceURI();
<b class="nc"><i>434</i>&nbsp;            String prop2 = target.getElementName().getLocalPart();</b>
<i>435</i>&nbsp;            XmlRootElementWriter xrew1 = (XmlRootElementWriter)cc.implClass.annotate2(XmlRootElementWriter.class);
<i>436</i>&nbsp;            xrew1.name(prop2);
<i>437</i>&nbsp;            if(!i$1.equals(mostUsedNamespaceURI)) {
<b class="nc"><i>438</i>&nbsp;                xrew1.namespace(i$1);</b>
<i>439</i>&nbsp;            }
<i>440</i>&nbsp;        }
<i>441</i>&nbsp;
<b class="nc"><i>442</i>&nbsp;        CPropertyInfo prop1;</b>
<i>443</i>&nbsp;        if(target.isOrdered()) {
<i>444</i>&nbsp;            i$ = target.getProperties().iterator();
<i>445</i>&nbsp;
<b class="nc"><i>446</i>&nbsp;            while(i$.hasNext()) {</b>
<i>447</i>&nbsp;                prop1 = (CPropertyInfo)i$.next();
<i>448</i>&nbsp;                if(!(prop1 instanceof CAttributePropertyInfo) &amp;&amp; (!(prop1 instanceof CReferencePropertyInfo) || !((CReferencePropertyInfo)prop1).isDummy())) {
<i>449</i>&nbsp;                    xtw.propOrder(prop1.getName(false));
<b class="nc"><i>450</i>&nbsp;                }</b>
<i>451</i>&nbsp;            }
<i>452</i>&nbsp;        } else {
<i>453</i>&nbsp;            xtw.getAnnotationUse().paramArray(&quot;propOrder&quot;);
<i>454</i>&nbsp;        }
<i>455</i>&nbsp;
<i>456</i>&nbsp;        i$ = target.getProperties().iterator();
<i>457</i>&nbsp;
<b class="nc"><i>458</i>&nbsp;        while(i$.hasNext()) {</b>
<i>459</i>&nbsp;            prop1 = (CPropertyInfo)i$.next();
<i>460</i>&nbsp;            this.generateFieldDecl(cc, prop1);
<i>461</i>&nbsp;        }
<i>462</i>&nbsp;
<i>463</i>&nbsp;        if(target.declaresAttributeWildcard()) {
<i>464</i>&nbsp;            this.generateAttributeWildcard(cc);
<i>465</i>&nbsp;        }
<b class="nc"><i>466</i>&nbsp;</b>
<b class="nc"><i>467</i>&nbsp;        cc.ref.javadoc().append(target.javadoc);</b>
<b class="nc"><i>468</i>&nbsp;        cc._package().objectFactoryGenerator().populate(cc);</b>
<b class="nc"><i>469</i>&nbsp;    }</b>
<i>470</i>&nbsp;
<i>471</i>&nbsp;    private void writeTypeName(QName typeName, XmlTypeWriter xtw, String mostUsedNamespaceURI) {
<i>472</i>&nbsp;        if(typeName == null) {
<i>473</i>&nbsp;            xtw.name(&quot;&quot;);
<i>474</i>&nbsp;        } else {
<i>475</i>&nbsp;            xtw.name(typeName.getLocalPart());
<i>476</i>&nbsp;            String typeNameURI = typeName.getNamespaceURI();
<i>477</i>&nbsp;            if(!typeNameURI.equals(mostUsedNamespaceURI)) {
<b class="nc"><i>478</i>&nbsp;                xtw.namespace(typeNameURI);</b>
<i>479</i>&nbsp;            }
<i>480</i>&nbsp;        }
<i>481</i>&nbsp;
<b class="nc"><i>482</i>&nbsp;    }</b>
<b class="nc"><i>483</i>&nbsp;</b>
<i>484</i>&nbsp;    private void generateAttributeWildcard(ClassOutlineImpl cc) {
<b class="nc"><i>485</i>&nbsp;        String FIELD_NAME = &quot;otherAttributes&quot;;</b>
<i>486</i>&nbsp;        String METHOD_SEED = this.model.getNameConverter().toClassName(FIELD_NAME);
<b class="nc"><i>487</i>&nbsp;        JClass mapType = this.codeModel.ref(Map.class).narrow(new Class[]{QName.class, String.class});</b>
<b class="nc"><i>488</i>&nbsp;        JClass mapImpl = this.codeModel.ref(HashMap.class).narrow(new Class[]{QName.class, String.class});</b>
<b class="nc"><i>489</i>&nbsp;        JFieldVar $ref = cc.implClass.field(4, mapType, FIELD_NAME, JExpr._new(mapImpl));</b>
<b class="nc"><i>490</i>&nbsp;        $ref.annotate2(XmlAnyAttributeWriter.class);</b>
<b class="nc"><i>491</i>&nbsp;        MethodWriter writer = cc.createMethodWriter();</b>
<b class="nc"><i>492</i>&nbsp;        JMethod $get = writer.declareMethod(mapType, &quot;get&quot; + METHOD_SEED);</b>
<b class="nc"><i>493</i>&nbsp;        $get.javadoc().append(&quot;Gets a map that contains attributes that aren\&#39;t bound to any typed property on this class.\n\n&lt;p&gt;\nthe map is keyed by the name of the attribute and \nthe value is the string value of the attribute.\n\nthe map returned by this method is live, and you can add new attribute\nby updating the map directly. Because of this design, there\&#39;s no setter.\n&quot;);</b>
<i>494</i>&nbsp;        $get.javadoc().addReturn().append(&quot;always non-null&quot;);
<i>495</i>&nbsp;        $get.body()._return($ref);
<i>496</i>&nbsp;    }
<b class="nc"><i>497</i>&nbsp;</b>
<b class="nc"><i>498</i>&nbsp;    private EnumOutline generateEnumDef(final CEnumLeafInfo e) {</b>
<b class="nc"><i>499</i>&nbsp;        final JDefinedClass type = this.getClassFactory().createClass(this.getContainer(e.parent, Aspect.EXPOSED), e.shortName, e.getLocator(), ClassType.ENUM);</b>
<i>500</i>&nbsp;        type.javadoc().append(e.javadoc);
<i>501</i>&nbsp;        return new EnumOutline(e, type) {
<i>502</i>&nbsp;            @NotNull
<b class="nc"><i>503</i>&nbsp;            public Outline parent() {</b>
<b class="nc"><i>504</i>&nbsp;                return BeanGenerator.this;</b>
<b class="nc"><i>505</i>&nbsp;            }</b>
<b class="nc"><i>506</i>&nbsp;        };</b>
<i>507</i>&nbsp;    }
<i>508</i>&nbsp;
<b class="nc"><i>509</i>&nbsp;    private void generateEnumBody(EnumOutline eo) {</b>
<b class="nc"><i>510</i>&nbsp;        JDefinedClass type = eo.clazz;</b>
<b class="nc"><i>511</i>&nbsp;        CEnumLeafInfo e = eo.target;</b>
<b class="nc"><i>512</i>&nbsp;        XmlTypeWriter xtw = (XmlTypeWriter)type.annotate2(XmlTypeWriter.class);</b>
<i>513</i>&nbsp;        this.writeTypeName(e.getTypeName(), xtw, eo._package().getMostUsedNamespaceURI());
<b class="nc"><i>514</i>&nbsp;        JCodeModel cModel = this.model.codeModel;</b>
<i>515</i>&nbsp;        JType baseExposedType = e.base.toType(this, Aspect.EXPOSED).unboxify();
<i>516</i>&nbsp;        JType baseImplType = e.base.toType(this, Aspect.IMPLEMENTATION).unboxify();
<i>517</i>&nbsp;        XmlEnumWriter xew = (XmlEnumWriter)type.annotate2(XmlEnumWriter.class);
<i>518</i>&nbsp;        xew.value(baseExposedType);
<i>519</i>&nbsp;        boolean needsValue = e.needsValueField();
<b class="nc"><i>520</i>&nbsp;        HashSet enumFieldNames = new HashSet();</b>
<i>521</i>&nbsp;
<i>522</i>&nbsp;        final CEnumConstant m1;
<b class="nc"><i>523</i>&nbsp;        final JEnumConstant fe;</b>
<b class="nc"><i>524</i>&nbsp;        for(Iterator m = e.members.iterator(); m.hasNext(); eo.constants.add(new EnumConstantOutline(m1, fe) {</b>
<i>525</i>&nbsp;        })) {
<i>526</i>&nbsp;            m1 = (CEnumConstant)m.next();
<b class="nc"><i>527</i>&nbsp;            String $v = m1.getName();</b>
<b class="nc"><i>528</i>&nbsp;            if(!JJavaName.isJavaIdentifier($v)) {</b>
<i>529</i>&nbsp;                this.getErrorReceiver().error(e.getLocator(), Messages.ERR_UNUSABLE_NAME.format(new Object[]{m1.getLexicalValue(), $v}));
<i>530</i>&nbsp;            }
<i>531</i>&nbsp;
<b class="nc"><i>532</i>&nbsp;            if(!enumFieldNames.add($v)) {</b>
<i>533</i>&nbsp;                this.getErrorReceiver().error(e.getLocator(), Messages.ERR_NAME_COLLISION.format(new Object[]{$v}));
<b class="nc"><i>534</i>&nbsp;            }</b>
<i>535</i>&nbsp;
<i>536</i>&nbsp;            fe = type.enumConstant($v);
<i>537</i>&nbsp;            if(needsValue) {
<b class="nc"><i>538</i>&nbsp;                fe.arg(e.base.createConstant(this, new XmlString(m1.getLexicalValue())));</b>
<b class="nc"><i>539</i>&nbsp;            }</b>
<i>540</i>&nbsp;
<b class="nc"><i>541</i>&nbsp;            if(!m1.getLexicalValue().equals($v)) {</b>
<b class="nc"><i>542</i>&nbsp;                ((XmlEnumValueWriter)fe.annotate2(XmlEnumValueWriter.class)).value(m1.getLexicalValue());</b>
<b class="nc"><i>543</i>&nbsp;            }</b>
<b class="nc"><i>544</i>&nbsp;</b>
<i>545</i>&nbsp;            if(m1.javadoc != null) {
<i>546</i>&nbsp;                fe.javadoc().append(m1.javadoc);
<i>547</i>&nbsp;            }
<i>548</i>&nbsp;        }
<i>549</i>&nbsp;
<i>550</i>&nbsp;        if(needsValue) {
<i>551</i>&nbsp;            JFieldVar m2 = type.field(12, baseExposedType, &quot;value&quot;);
<b class="nc"><i>552</i>&nbsp;            type.method(1, baseExposedType, &quot;value&quot;).body()._return(m2);</b>
<b class="nc"><i>553</i>&nbsp;            JMethod m3 = type.constructor(0);</b>
<i>554</i>&nbsp;            m3.body().assign(m2, m3.param(baseImplType, &quot;v&quot;));
<b class="nc"><i>555</i>&nbsp;            m3 = type.method(17, type, &quot;fromValue&quot;);</b>
<b class="nc"><i>556</i>&nbsp;            JVar $v1 = m3.param(baseExposedType, &quot;v&quot;);</b>
<i>557</i>&nbsp;            JForEach fe1 = m3.body().forEach(type, &quot;c&quot;, type.staticInvoke(&quot;values&quot;));
<i>558</i>&nbsp;            Object eq;
<i>559</i>&nbsp;            if(baseExposedType.isPrimitive()) {
<b class="nc"><i>560</i>&nbsp;                eq = fe1.var().ref(m2).eq($v1);</b>
<i>561</i>&nbsp;            } else {
<b class="nc"><i>562</i>&nbsp;                eq = fe1.var().ref(m2).invoke(&quot;equals&quot;).arg($v1);</b>
<i>563</i>&nbsp;            }
<b class="nc"><i>564</i>&nbsp;</b>
<i>565</i>&nbsp;            fe1.body()._if((JExpression)eq)._then()._return(fe1.var());
<b class="nc"><i>566</i>&nbsp;            JInvocation ex = JExpr._new(cModel.ref(IllegalArgumentException.class));</b>
<b class="nc"><i>567</i>&nbsp;            Object strForm;</b>
<i>568</i>&nbsp;            if(baseExposedType.isPrimitive()) {
<i>569</i>&nbsp;                strForm = cModel.ref(String.class).staticInvoke(&quot;valueOf&quot;).arg($v1);
<i>570</i>&nbsp;            } else if(baseExposedType == cModel.ref(String.class)) {
<i>571</i>&nbsp;                strForm = $v1;
<i>572</i>&nbsp;            } else {
<i>573</i>&nbsp;                strForm = $v1.invoke(&quot;toString&quot;);
<i>574</i>&nbsp;            }
<b class="nc"><i>575</i>&nbsp;</b>
<i>576</i>&nbsp;            m3.body()._throw(ex.arg((JExpression)strForm));
<b class="nc"><i>577</i>&nbsp;        } else {</b>
<i>578</i>&nbsp;            type.method(1, String.class, &quot;value&quot;).body()._return(JExpr.invoke(&quot;name&quot;));
<i>579</i>&nbsp;            JMethod m4 = type.method(17, type, &quot;fromValue&quot;);
<i>580</i>&nbsp;            m4.body()._return(JExpr.invoke(&quot;valueOf&quot;).arg(m4.param(String.class, &quot;v&quot;)));
<i>581</i>&nbsp;        }
<i>582</i>&nbsp;
<i>583</i>&nbsp;    }
<i>584</i>&nbsp;
<i>585</i>&nbsp;    private FieldOutline generateFieldDecl(ClassOutlineImpl cc, CPropertyInfo prop) {
<i>586</i>&nbsp;        FieldRenderer fr = prop.realization;
<i>587</i>&nbsp;        if(fr == null) {
<i>588</i>&nbsp;            fr = this.model.options.getFieldRendererFactory().getDefault();
<b class="nc"><i>589</i>&nbsp;        }</b>
<i>590</i>&nbsp;
<b class="nc"><i>591</i>&nbsp;        FieldOutline field = fr.generate(cc, prop);</b>
<i>592</i>&nbsp;        this.fields.put(prop, field);
<b class="nc"><i>593</i>&nbsp;        return field;</b>
<i>594</i>&nbsp;    }
<i>595</i>&nbsp;
<b class="nc"><i>596</i>&nbsp;    public final void generateAdapterIfNecessary(CPropertyInfo prop, JAnnotatable field) {</b>
<i>597</i>&nbsp;        CAdapter adapter = prop.getAdapter();
<i>598</i>&nbsp;        if(adapter != null) {
<i>599</i>&nbsp;            if(adapter.getAdapterIfKnown() == SwaRefAdapter.class) {
<i>600</i>&nbsp;                field.annotate(XmlAttachmentRef.class);
<i>601</i>&nbsp;            } else {
<b class="nc"><i>602</i>&nbsp;                XmlJavaTypeAdapterWriter xjtw = (XmlJavaTypeAdapterWriter)field.annotate2(XmlJavaTypeAdapterWriter.class);</b>
<b class="nc"><i>603</i>&nbsp;                xjtw.value(((NClass)adapter.adapterType).toType(this, Aspect.EXPOSED));</b>
<i>604</i>&nbsp;            }
<b class="nc"><i>605</i>&nbsp;        }</b>
<b class="nc"><i>606</i>&nbsp;</b>
<i>607</i>&nbsp;        switch(BeanGenerator.SyntheticClass_1.$SwitchMap$com$sun$xml$internal$bind$v2$model$core$ID[prop.id().ordinal()]) {
<i>608</i>&nbsp;        case 1:
<b class="nc"><i>609</i>&nbsp;            field.annotate(XmlID.class);</b>
<i>610</i>&nbsp;            break;
<i>611</i>&nbsp;        case 2:
<b class="nc"><i>612</i>&nbsp;            field.annotate(XmlIDREF.class);</b>
<b class="nc"><i>613</i>&nbsp;        }</b>
<i>614</i>&nbsp;
<i>615</i>&nbsp;        if(prop.getExpectedMimeType() != null) {
<b class="nc"><i>616</i>&nbsp;            ((XmlMimeTypeWriter)field.annotate2(XmlMimeTypeWriter.class)).value(prop.getExpectedMimeType().toString());</b>
<b class="nc"><i>617</i>&nbsp;        }</b>
<i>618</i>&nbsp;
<i>619</i>&nbsp;    }
<b class="nc"><i>620</i>&nbsp;</b>
<i>621</i>&nbsp;    public final JClass addRuntime(Class clazz) {
<i>622</i>&nbsp;        JClass g = (JClass)this.generatedRuntime.get(clazz);
<i>623</i>&nbsp;        if(g == null) {
<i>624</i>&nbsp;            JPackage implPkg = this.getUsedPackages(Aspect.IMPLEMENTATION)[0].subPackage(&quot;runtime&quot;);
<i>625</i>&nbsp;            g = this.generateStaticClass(clazz, implPkg);
<b class="nc"><i>626</i>&nbsp;            this.generatedRuntime.put(clazz, g);</b>
<i>627</i>&nbsp;        }
<b class="nc"><i>628</i>&nbsp;</b>
<b class="nc"><i>629</i>&nbsp;        return g;</b>
<i>630</i>&nbsp;    }
<b class="nc"><i>631</i>&nbsp;</b>
<i>632</i>&nbsp;    public JClass generateStaticClass(Class src, JPackage out) {
<b class="nc"><i>633</i>&nbsp;        String shortName = this.getShortName(src.getName());</b>
<i>634</i>&nbsp;        URL res = src.getResource(shortName + &quot;.java&quot;);
<i>635</i>&nbsp;        if(res == null) {
<i>636</i>&nbsp;            res = src.getResource(shortName + &quot;.java_&quot;);
<b class="nc"><i>637</i>&nbsp;        }</b>
<b class="nc"><i>638</i>&nbsp;</b>
<i>639</i>&nbsp;        if(res == null) {
<i>640</i>&nbsp;            throw new InternalError(&quot;Unable to load source code of &quot; + src.getName() + &quot; as a resource&quot;);
<i>641</i>&nbsp;        } else {
<i>642</i>&nbsp;            JStaticJavaFile sjf = new JStaticJavaFile(out, shortName, res, (LineFilter)null);
<b class="nc"><i>643</i>&nbsp;            out.addResourceFile(sjf);</b>
<b class="nc"><i>644</i>&nbsp;            return sjf.getJClass();</b>
<b class="nc"><i>645</i>&nbsp;        }</b>
<i>646</i>&nbsp;    }
<b class="nc"><i>647</i>&nbsp;</b>
<b class="nc"><i>648</i>&nbsp;    private String getShortName(String name) {</b>
<i>649</i>&nbsp;        return name.substring(name.lastIndexOf(46) + 1);
<i>650</i>&nbsp;    }
<b class="nc"><i>651</i>&nbsp;}</b>
</div>
</div>

<div class="footer">
    
    <div style="float:right;">generated on 2014-12-21 15:52</div>
</div>
</body>
</html>
